2024-07-09 13:45:21.192  INFO 28536 --- [  restartedMain] org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-07-09 13:45:21.898  INFO 28536 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2024-07-09 13:45:21.920 DEBUG 28536 --- [  restartedMain] org.springframework.web.client.RestTemplate : HTTP GET http://localhost:8888/security/default
2024-07-09 13:45:21.967 DEBUG 28536 --- [  restartedMain] org.springframework.web.client.RestTemplate : Accept=[application/json, application/*+json]
2024-07-09 13:45:21.978  INFO 28536 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2024-07-09 13:45:21.978  WARN 28536 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/security/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2024-07-09 13:45:21.981  INFO 28536 --- [  restartedMain] com.security.gateway.CentraGuardApplication : No active profile set, falling back to default profiles: default
2024-07-09 13:45:23.250  INFO 28536 --- [  restartedMain] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-09 13:45:23.356  INFO 28536 --- [  restartedMain] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 96 ms. Found 5 JPA repository interfaces.
2024-07-09 13:45:23.493  WARN 28536 --- [  restartedMain] org.springframework.boot.actuate.endpoint.EndpointId : Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2024-07-09 13:45:23.678  INFO 28536 --- [  restartedMain] org.springframework.cloud.context.scope.GenericScope : BeanFactory id=85a6a779-07b3-35af-b092-1e4bd37dad27
2024-07-09 13:45:24.019  INFO 28536 --- [  restartedMain] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@30eb0602' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-07-09 13:45:24.027  INFO 28536 --- [  restartedMain] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker : Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-07-09 13:45:24.482  INFO 28536 --- [  restartedMain] org.springframework.boot.web.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 8080 (http)
2024-07-09 13:45:24.613  INFO 28536 --- [  restartedMain] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2617 ms
2024-07-09 13:45:26.672  INFO 28536 --- [  restartedMain] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-09 13:45:27.188 DEBUG 28536 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-07-09 13:45:27.631 DEBUG 28536 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2024-07-09 13:45:27.783  INFO 28536 --- [  restartedMain] org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver : Exposing 3 endpoint(s) beneath base path '/actuator'
2024-07-09 13:45:27.951  INFO 28536 --- [  restartedMain] org.springframework.security.web.DefaultSecurityFilterChain : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@48987b9f, org.springframework.security.web.context.SecurityContextPersistenceFilter@2326f489, org.springframework.security.web.header.HeaderWriterFilter@7dc1d5e0, org.springframework.web.filter.CorsFilter@1d469c9, org.springframework.security.web.authentication.logout.LogoutFilter@441361a0, jwt.com.security.gateway.JwtEmailAndPasswordAuthenticationFilter@1c2fd60b, jwt.com.security.gateway.JwtTokenVerifier@5ceeb03, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@921477a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@36cc08cc, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7d8f4042, org.springframework.security.web.session.SessionManagementFilter@2e89d23f, org.springframework.security.web.access.ExceptionTranslationFilter@585a9002, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@229cf1d8]
2024-07-09 13:45:28.029  INFO 28536 --- [  restartedMain] org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor : Initializing ExecutorService 'applicationTaskExecutor'
2024-07-09 13:45:28.078  INFO 28536 --- [  restartedMain] org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer : LiveReload server is running on port 35729
2024-07-09 13:45:28.096 DEBUG 28536 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-07-09 13:45:28.133 DEBUG 28536 --- [  restartedMain] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping : Patterns [/swagger-ui/] in 'viewControllerHandlerMapping'
2024-07-09 13:45:28.172 DEBUG 28536 --- [  restartedMain] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping : Patterns [/swagger-ui/**, /webjars/**, /**] in 'resourceHandlerMapping'
2024-07-09 13:45:28.603  INFO 28536 --- [  restartedMain] org.springframework.cloud.netflix.zuul.ZuulFilterInitializer : Starting filter initializer
2024-07-09 13:45:28.687  INFO 28536 --- [  restartedMain] org.springframework.boot.web.embedded.tomcat.TomcatWebServer : Tomcat started on port(s): 8080 (http) with context path ''
2024-07-09 13:45:29.163  INFO 28536 --- [  restartedMain] com.security.gateway.CentraGuardApplication : Started CentraGuardApplication in 8.926 seconds (JVM running for 11.036)
2024-07-09 13:45:29.856  INFO 28536 --- [3)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Initializing Servlet 'dispatcherServlet'
2024-07-09 13:45:29.856 DEBUG 28536 --- [3)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected StandardServletMultipartResolver
2024-07-09 13:45:29.856 DEBUG 28536 --- [3)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected AcceptHeaderLocaleResolver
2024-07-09 13:45:29.856 DEBUG 28536 --- [3)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected FixedThemeResolver
2024-07-09 13:45:29.858 DEBUG 28536 --- [3)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@48d57f7c
2024-07-09 13:45:29.859 DEBUG 28536 --- [3)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected org.springframework.web.servlet.support.SessionFlashMapManager@3fe9e585
2024-07-09 13:45:29.859 DEBUG 28536 --- [3)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-07-09 13:45:29.859  INFO 28536 --- [3)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Completed initialization in 3 ms
2024-07-09 13:47:17.578 DEBUG 28536 --- [nio-8080-exec-1] org.springframework.web.servlet.DispatcherServlet : POST "/api/createUser", parameters={}
2024-07-09 13:47:17.587 DEBUG 28536 --- [nio-8080-exec-1] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping : Mapped to controller.com.security.gateway.UserController#createNewUser(ApplicationUserDTO, HttpServletRequest)
2024-07-09 13:47:17.618 DEBUG 28536 --- [nio-8080-exec-1] org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor : Read "application/json;charset=UTF-8" to [dto.com.security.gateway.ApplicationUserDTO@717338e6]
2024-07-09 13:47:17.983 DEBUG 28536 --- [nio-8080-exec-1] org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor : Using 'text/plain', given [*/*] and supported [text/plain, */*, text/plain, */*, application/json, application/*+json, application/json, application/*+json]
2024-07-09 13:47:17.984 DEBUG 28536 --- [nio-8080-exec-1] org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor : Writing ["User saved"]
2024-07-09 13:47:17.995 DEBUG 28536 --- [nio-8080-exec-1] org.springframework.web.servlet.DispatcherServlet : Completed 201 CREATED
2024-07-09 13:47:59.043 ERROR 28536 --- [nio-8080-exec-7] jwt.com.security.gateway.JwtEmailAndPasswordAuthenticationFilter : An internal error occurred while trying to authenticate the user.

org.springframework.security.authentication.InternalAuthenticationServiceException: Something went wrong while parsing /login request body
	at jwt.com.security.gateway.JwtEmailAndPasswordAuthenticationFilter.attemptAuthentication(JwtEmailAndPasswordAuthenticationFilter.java:53) ~[main/:?]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:222) [spring-security-web-5.4.6.jar:5.4.6]
	at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:212) [spring-security-web-5.4.6.jar:5.4.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.4.6.jar:5.4.6]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103) [spring-security-web-5.4.6.jar:5.4.6]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89) [spring-security-web-5.4.6.jar:5.4.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.4.6.jar:5.4.6]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) [spring-web-5.3.6.jar:5.3.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.6.jar:5.3.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.4.6.jar:5.4.6]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) [spring-security-web-5.4.6.jar:5.4.6]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) [spring-security-web-5.4.6.jar:5.4.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.6.jar:5.3.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.4.6.jar:5.4.6]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110) [spring-security-web-5.4.6.jar:5.4.6]
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80) [spring-security-web-5.4.6.jar:5.4.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.4.6.jar:5.4.6]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55) [spring-security-web-5.4.6.jar:5.4.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.6.jar:5.3.6]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336) [spring-security-web-5.4.6.jar:5.4.6]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211) [spring-security-web-5.4.6.jar:5.4.6]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183) [spring-security-web-5.4.6.jar:5.4.6]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:358) [spring-web-5.3.6.jar:5.3.6]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:271) [spring-web-5.3.6.jar:5.3.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) [spring-web-5.3.6.jar:5.3.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.6.jar:5.3.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) [spring-web-5.3.6.jar:5.3.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.6.jar:5.3.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:93) [spring-boot-actuator-2.4.5.jar:2.4.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.6.jar:5.3.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) [spring-web-5.3.6.jar:5.3.6]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:119) [spring-web-5.3.6.jar:5.3.6]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:202) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:143) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:374) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1707) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) [?:?]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) [?:?]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) [tomcat-embed-core-9.0.45.jar:9.0.45]
	at java.lang.Thread.run(Thread.java:829) [?:?]
Caused by: com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException: Unrecognized field "username" (class jwt.com.security.gateway.EmailAndPasswordAuthenticationRequest), not marked as ignorable (2 known properties: "password", "email"])
 at [Source: (org.apache.catalina.connector.CoyoteInputStream); line: 2, column: 19] (through reference chain: jwt.com.security.gateway.EmailAndPasswordAuthenticationRequest["username"])
	at com.fasterxml.jackson.databind.exc.UnrecognizedPropertyException.from(UnrecognizedPropertyException.java:61) ~[jackson-databind-2.11.4.jar:2.11.4]
	at com.fasterxml.jackson.databind.DeserializationContext.handleUnknownProperty(DeserializationContext.java:855) ~[jackson-databind-2.11.4.jar:2.11.4]
	at com.fasterxml.jackson.databind.deser.std.StdDeserializer.handleUnknownProperty(StdDeserializer.java:1212) ~[jackson-databind-2.11.4.jar:2.11.4]
	at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownProperty(BeanDeserializerBase.java:1604) ~[jackson-databind-2.11.4.jar:2.11.4]
	at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.handleUnknownVanilla(BeanDeserializerBase.java:1582) ~[jackson-databind-2.11.4.jar:2.11.4]
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.vanillaDeserialize(BeanDeserializer.java:299) ~[jackson-databind-2.11.4.jar:2.11.4]
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:156) ~[jackson-databind-2.11.4.jar:2.11.4]
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4526) ~[jackson-databind-2.11.4.jar:2.11.4]
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3505) ~[jackson-databind-2.11.4.jar:2.11.4]
	at jwt.com.security.gateway.JwtEmailAndPasswordAuthenticationFilter.attemptAuthentication(JwtEmailAndPasswordAuthenticationFilter.java:44) ~[main/:?]
	... 57 more

2024-07-09 13:47:59.050 DEBUG 28536 --- [nio-8080-exec-7] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : Using @ExceptionHandler handler.exception.com.security.gateway.RestExceptionHandler#handleAuthenticationException(HttpServletRequest, AuthenticationException)
2024-07-09 13:47:59.055 ERROR 28536 --- [nio-8080-exec-7] exception.com.security.gateway.LogSupport : Something went wrong while parsing /login request body File name: JwtEmailAndPasswordAuthenticationFilter.java line: 53
2024-07-09 13:47:59.058 DEBUG 28536 --- [nio-8080-exec-7] org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
2024-07-09 13:47:59.058 DEBUG 28536 --- [nio-8080-exec-7] org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor : Writing [exception.com.security.gateway.ApiError@10993eba]
2024-07-09 13:47:59.069  WARN 28536 --- [nio-8080-exec-7] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authentication.InternalAuthenticationServiceException: Something went wrong while parsing /login request body]
2024-07-09 13:48:31.020 DEBUG 28536 --- [nio-8080-exec-4] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : Using @ExceptionHandler handler.exception.com.security.gateway.RestExceptionHandler#handleAuthenticationException(HttpServletRequest, AuthenticationException)
2024-07-09 13:48:31.021 ERROR 28536 --- [nio-8080-exec-4] exception.com.security.gateway.LogSupport : User account is locked File name: AbstractUserDetailsAuthenticationProvider.java line: 325
2024-07-09 13:48:31.021 DEBUG 28536 --- [nio-8080-exec-4] org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
2024-07-09 13:48:31.021 DEBUG 28536 --- [nio-8080-exec-4] org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor : Writing [exception.com.security.gateway.ApiError@1203201]
2024-07-09 13:48:31.022  WARN 28536 --- [nio-8080-exec-4] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authentication.LockedException: User account is locked]
2024-07-09 13:52:31.540  INFO 28536 --- [       Thread-7] org.springframework.cloud.netflix.zuul.ZuulFilterInitializer : Stopping filter initializer
2024-07-09 13:52:31.549  INFO 28536 --- [       Thread-7] org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor : Shutting down ExecutorService 'applicationTaskExecutor'
2024-07-09 13:52:31.569  INFO 28536 --- [       Thread-7] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-09 13:52:33.014  INFO 28536 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2024-07-09 13:52:33.015 DEBUG 28536 --- [  restartedMain] org.springframework.web.client.RestTemplate : HTTP GET http://localhost:8888/security/default
2024-07-09 13:52:33.018 DEBUG 28536 --- [  restartedMain] org.springframework.web.client.RestTemplate : Accept=[application/json, application/*+json]
2024-07-09 13:52:33.019  INFO 28536 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2024-07-09 13:52:33.019  WARN 28536 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/security/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2024-07-09 13:52:33.022  INFO 28536 --- [  restartedMain] com.security.gateway.CentraGuardApplication : No active profile set, falling back to default profiles: default
2024-07-09 13:52:33.843  INFO 28536 --- [  restartedMain] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-09 13:52:33.920  INFO 28536 --- [  restartedMain] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 69 ms. Found 5 JPA repository interfaces.
2024-07-09 13:52:34.012  INFO 28536 --- [  restartedMain] org.springframework.cloud.context.scope.GenericScope : BeanFactory id=85a6a779-07b3-35af-b092-1e4bd37dad27
2024-07-09 13:52:34.062  INFO 28536 --- [  restartedMain] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4d6ce6eb' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-07-09 13:52:34.062  INFO 28536 --- [  restartedMain] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker : Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-07-09 13:52:34.154  INFO 28536 --- [  restartedMain] org.springframework.boot.web.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 8080 (http)
2024-07-09 13:52:34.185  INFO 28536 --- [  restartedMain] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1159 ms
2024-07-09 13:52:34.938  INFO 28536 --- [  restartedMain] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-09 13:52:35.217 DEBUG 28536 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-07-09 13:52:35.460 DEBUG 28536 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2024-07-09 13:52:35.595  INFO 28536 --- [  restartedMain] org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver : Exposing 3 endpoint(s) beneath base path '/actuator'
2024-07-09 13:52:35.740  INFO 28536 --- [  restartedMain] org.springframework.security.web.DefaultSecurityFilterChain : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@db554cf, org.springframework.security.web.context.SecurityContextPersistenceFilter@3573f1ae, org.springframework.security.web.header.HeaderWriterFilter@3c951f05, org.springframework.web.filter.CorsFilter@3008e185, org.springframework.security.web.authentication.logout.LogoutFilter@383c65fb, jwt.com.security.gateway.JwtEmailAndPasswordAuthenticationFilter@7b69e85e, jwt.com.security.gateway.JwtTokenVerifier@377c654, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2d4f59ae, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4e567923, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4bb09ee3, org.springframework.security.web.session.SessionManagementFilter@3d7de04d, org.springframework.security.web.access.ExceptionTranslationFilter@6b870087, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@75b7a70e]
2024-07-09 13:52:35.796  INFO 28536 --- [  restartedMain] org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor : Initializing ExecutorService 'applicationTaskExecutor'
2024-07-09 13:52:35.811  INFO 28536 --- [  restartedMain] org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer : LiveReload server is running on port 35729
2024-07-09 13:52:35.850 DEBUG 28536 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-07-09 13:52:35.859 DEBUG 28536 --- [  restartedMain] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping : Patterns [/swagger-ui/] in 'viewControllerHandlerMapping'
2024-07-09 13:52:35.890 DEBUG 28536 --- [  restartedMain] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping : Patterns [/swagger-ui/**, /webjars/**, /**] in 'resourceHandlerMapping'
2024-07-09 13:52:36.076  INFO 28536 --- [  restartedMain] org.springframework.cloud.netflix.zuul.ZuulFilterInitializer : Starting filter initializer
2024-07-09 13:52:36.141  INFO 28536 --- [  restartedMain] org.springframework.boot.web.embedded.tomcat.TomcatWebServer : Tomcat started on port(s): 8080 (http) with context path ''
2024-07-09 13:52:36.478  INFO 28536 --- [nio-8080-exec-1] org.springframework.web.servlet.DispatcherServlet : Initializing Servlet 'dispatcherServlet'
2024-07-09 13:52:36.478 DEBUG 28536 --- [nio-8080-exec-1] org.springframework.web.servlet.DispatcherServlet : Detected StandardServletMultipartResolver
2024-07-09 13:52:36.478 DEBUG 28536 --- [nio-8080-exec-1] org.springframework.web.servlet.DispatcherServlet : Detected AcceptHeaderLocaleResolver
2024-07-09 13:52:36.478 DEBUG 28536 --- [nio-8080-exec-1] org.springframework.web.servlet.DispatcherServlet : Detected FixedThemeResolver
2024-07-09 13:52:36.481 DEBUG 28536 --- [nio-8080-exec-1] org.springframework.web.servlet.DispatcherServlet : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@759202fd
2024-07-09 13:52:36.482 DEBUG 28536 --- [nio-8080-exec-1] org.springframework.web.servlet.DispatcherServlet : Detected org.springframework.web.servlet.support.SessionFlashMapManager@4ddb5d61
2024-07-09 13:52:36.483 DEBUG 28536 --- [nio-8080-exec-1] org.springframework.web.servlet.DispatcherServlet : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-07-09 13:52:36.483  INFO 28536 --- [nio-8080-exec-1] org.springframework.web.servlet.DispatcherServlet : Completed initialization in 5 ms
2024-07-09 13:52:36.625 DEBUG 28536 --- [nio-8080-exec-1] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : Using @ExceptionHandler handler.exception.com.security.gateway.RestExceptionHandler#handleAuthenticationException(HttpServletRequest, AuthenticationException)
2024-07-09 13:52:36.628 ERROR 28536 --- [nio-8080-exec-1] exception.com.security.gateway.LogSupport : User account is locked File name: AbstractUserDetailsAuthenticationProvider.java line: 325
2024-07-09 13:52:36.631 DEBUG 28536 --- [nio-8080-exec-1] org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
2024-07-09 13:52:36.631 DEBUG 28536 --- [nio-8080-exec-1] org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor : Writing [exception.com.security.gateway.ApiError@42a25284]
2024-07-09 13:52:36.633  WARN 28536 --- [nio-8080-exec-1] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authentication.LockedException: User account is locked]
2024-07-09 13:52:36.652  INFO 28536 --- [  restartedMain] com.security.gateway.CentraGuardApplication : Started CentraGuardApplication in 4.965 seconds (JVM running for 438.526)
2024-07-09 13:52:36.657  INFO 28536 --- [  restartedMain] org.springframework.boot.devtools.autoconfigure.ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2024-07-09 13:52:37.892  INFO 28536 --- [      Thread-12] org.springframework.cloud.netflix.zuul.ZuulFilterInitializer : Stopping filter initializer
2024-07-09 13:52:37.894  INFO 28536 --- [      Thread-12] org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor : Shutting down ExecutorService 'applicationTaskExecutor'
2024-07-09 13:52:37.896  INFO 28536 --- [      Thread-12] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-09 13:52:38.904  INFO 28536 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2024-07-09 13:52:38.904 DEBUG 28536 --- [  restartedMain] org.springframework.web.client.RestTemplate : HTTP GET http://localhost:8888/security/default
2024-07-09 13:52:38.904 DEBUG 28536 --- [  restartedMain] org.springframework.web.client.RestTemplate : Accept=[application/json, application/*+json]
2024-07-09 13:52:38.920  INFO 28536 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2024-07-09 13:52:38.920  WARN 28536 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/security/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2024-07-09 13:52:38.921  INFO 28536 --- [  restartedMain] com.security.gateway.CentraGuardApplication : No active profile set, falling back to default profiles: default
2024-07-09 13:52:39.508  INFO 28536 --- [  restartedMain] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-09 13:52:39.556  INFO 28536 --- [  restartedMain] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 40 ms. Found 5 JPA repository interfaces.
2024-07-09 13:52:39.625  INFO 28536 --- [  restartedMain] org.springframework.cloud.context.scope.GenericScope : BeanFactory id=85a6a779-07b3-35af-b092-1e4bd37dad27
2024-07-09 13:52:39.654  INFO 28536 --- [  restartedMain] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@6c0f6666' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-07-09 13:52:39.654  INFO 28536 --- [  restartedMain] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker : Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-07-09 13:52:39.765  INFO 28536 --- [  restartedMain] org.springframework.boot.web.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 8080 (http)
2024-07-09 13:52:39.811  INFO 28536 --- [  restartedMain] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 890 ms
2024-07-09 13:52:40.684  INFO 28536 --- [  restartedMain] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-09 13:52:40.959 DEBUG 28536 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-07-09 13:52:41.156 DEBUG 28536 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2024-07-09 13:52:41.368  INFO 28536 --- [  restartedMain] org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver : Exposing 3 endpoint(s) beneath base path '/actuator'
2024-07-09 13:52:41.452  INFO 28536 --- [  restartedMain] org.springframework.security.web.DefaultSecurityFilterChain : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@28b1ad5f, org.springframework.security.web.context.SecurityContextPersistenceFilter@731d77d2, org.springframework.security.web.header.HeaderWriterFilter@5b0c6b3e, org.springframework.web.filter.CorsFilter@4bd9f947, org.springframework.security.web.authentication.logout.LogoutFilter@27a381d3, jwt.com.security.gateway.JwtEmailAndPasswordAuthenticationFilter@53730238, jwt.com.security.gateway.JwtTokenVerifier@333b0b23, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@23023e28, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@59505728, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@14f62fb1, org.springframework.security.web.session.SessionManagementFilter@2eac6a50, org.springframework.security.web.access.ExceptionTranslationFilter@68cab274, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7eeb203d]
2024-07-09 13:52:41.514  INFO 28536 --- [  restartedMain] org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor : Initializing ExecutorService 'applicationTaskExecutor'
2024-07-09 13:52:41.554  INFO 28536 --- [  restartedMain] org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer : LiveReload server is running on port 35729
2024-07-09 13:52:41.570 DEBUG 28536 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-07-09 13:52:41.613 DEBUG 28536 --- [  restartedMain] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping : Patterns [/swagger-ui/] in 'viewControllerHandlerMapping'
2024-07-09 13:52:41.638 DEBUG 28536 --- [  restartedMain] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping : Patterns [/swagger-ui/**, /webjars/**, /**] in 'resourceHandlerMapping'
2024-07-09 13:52:41.798  INFO 28536 --- [  restartedMain] org.springframework.cloud.netflix.zuul.ZuulFilterInitializer : Starting filter initializer
2024-07-09 13:52:41.830  INFO 28536 --- [  restartedMain] org.springframework.boot.web.embedded.tomcat.TomcatWebServer : Tomcat started on port(s): 8080 (http) with context path ''
2024-07-09 13:52:42.218  INFO 28536 --- [  restartedMain] com.security.gateway.CentraGuardApplication : Started CentraGuardApplication in 4.239 seconds (JVM running for 444.092)
2024-07-09 13:52:42.218  INFO 28536 --- [  restartedMain] org.springframework.boot.devtools.autoconfigure.ConditionEvaluationDeltaLoggingListener : Condition evaluation unchanged
2024-07-09 13:57:17.221  INFO 28536 --- [extShutdownHook] org.springframework.cloud.netflix.zuul.ZuulFilterInitializer : Stopping filter initializer
2024-07-09 13:57:17.222  INFO 28536 --- [extShutdownHook] org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor : Shutting down ExecutorService 'applicationTaskExecutor'
2024-07-09 13:57:17.224  INFO 28536 --- [extShutdownHook] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-09 13:57:23.312  INFO 30028 --- [  restartedMain] org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-07-09 13:57:23.969  INFO 30028 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2024-07-09 13:57:23.986 DEBUG 30028 --- [  restartedMain] org.springframework.web.client.RestTemplate : HTTP GET http://localhost:8888/security/default
2024-07-09 13:57:24.031 DEBUG 30028 --- [  restartedMain] org.springframework.web.client.RestTemplate : Accept=[application/json, application/*+json]
2024-07-09 13:57:24.036  INFO 30028 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2024-07-09 13:57:24.037  WARN 30028 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/security/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2024-07-09 13:57:24.040  INFO 30028 --- [  restartedMain] com.security.gateway.CentraGuardApplication : No active profile set, falling back to default profiles: default
2024-07-09 13:57:25.236  INFO 30028 --- [  restartedMain] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-09 13:57:25.332  INFO 30028 --- [  restartedMain] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 87 ms. Found 5 JPA repository interfaces.
2024-07-09 13:57:25.454  WARN 30028 --- [  restartedMain] org.springframework.boot.actuate.endpoint.EndpointId : Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2024-07-09 13:57:25.607  INFO 30028 --- [  restartedMain] org.springframework.cloud.context.scope.GenericScope : BeanFactory id=85a6a779-07b3-35af-b092-1e4bd37dad27
2024-07-09 13:57:25.840  INFO 30028 --- [  restartedMain] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4d2e5886' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-07-09 13:57:25.847  INFO 30028 --- [  restartedMain] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker : Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-07-09 13:57:26.310  INFO 30028 --- [  restartedMain] org.springframework.boot.web.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 8080 (http)
2024-07-09 13:57:26.425  INFO 30028 --- [  restartedMain] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2369 ms
2024-07-09 13:57:28.503  INFO 30028 --- [  restartedMain] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-09 13:57:29.274 DEBUG 30028 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-07-09 13:57:35.429 DEBUG 30028 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2024-07-09 13:57:35.676  INFO 30028 --- [  restartedMain] org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver : Exposing 3 endpoint(s) beneath base path '/actuator'
2024-07-09 13:57:35.916  INFO 30028 --- [  restartedMain] org.springframework.security.web.DefaultSecurityFilterChain : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@34288c46, org.springframework.security.web.context.SecurityContextPersistenceFilter@18450b87, org.springframework.security.web.header.HeaderWriterFilter@857bc90, org.springframework.web.filter.CorsFilter@75891fa4, org.springframework.security.web.authentication.logout.LogoutFilter@56ef3af8, jwt.com.security.gateway.JwtEmailAndPasswordAuthenticationFilter@5e324cc5, jwt.com.security.gateway.JwtTokenVerifier@578aec5d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@10f4cdd9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@780f7be7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7c5e5476, org.springframework.security.web.session.SessionManagementFilter@142f5b5, org.springframework.security.web.access.ExceptionTranslationFilter@3b5860e4, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@f9243a8]
2024-07-09 13:57:36.025  INFO 30028 --- [  restartedMain] org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor : Initializing ExecutorService 'applicationTaskExecutor'
2024-07-09 13:57:36.079  INFO 30028 --- [  restartedMain] org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer : LiveReload server is running on port 35729
2024-07-09 13:57:36.106 DEBUG 30028 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-07-09 13:57:36.163 DEBUG 30028 --- [  restartedMain] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping : Patterns [/swagger-ui/] in 'viewControllerHandlerMapping'
2024-07-09 13:57:36.210 DEBUG 30028 --- [  restartedMain] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping : Patterns [/swagger-ui/**, /webjars/**, /**] in 'resourceHandlerMapping'
2024-07-09 13:57:36.603  INFO 30028 --- [  restartedMain] org.springframework.cloud.netflix.zuul.ZuulFilterInitializer : Starting filter initializer
2024-07-09 13:57:36.710  INFO 30028 --- [  restartedMain] org.springframework.boot.web.embedded.tomcat.TomcatWebServer : Tomcat started on port(s): 8080 (http) with context path ''
2024-07-09 13:57:37.243  INFO 30028 --- [  restartedMain] com.security.gateway.CentraGuardApplication : Started CentraGuardApplication in 14.729 seconds (JVM running for 16.401)
2024-07-09 13:57:37.470  INFO 30028 --- [2)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Initializing Servlet 'dispatcherServlet'
2024-07-09 13:57:37.471 DEBUG 30028 --- [2)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected StandardServletMultipartResolver
2024-07-09 13:57:37.471 DEBUG 30028 --- [2)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected AcceptHeaderLocaleResolver
2024-07-09 13:57:37.471 DEBUG 30028 --- [2)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected FixedThemeResolver
2024-07-09 13:57:37.475 DEBUG 30028 --- [2)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@2ce20f3e
2024-07-09 13:57:37.476 DEBUG 30028 --- [2)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected org.springframework.web.servlet.support.SessionFlashMapManager@48efb3f1
2024-07-09 13:57:37.476 DEBUG 30028 --- [2)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-07-09 13:57:37.476  INFO 30028 --- [2)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Completed initialization in 6 ms
2024-07-09 13:59:15.286 DEBUG 30028 --- [nio-8080-exec-1] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : Using @ExceptionHandler handler.exception.com.security.gateway.RestExceptionHandler#handleAuthenticationException(HttpServletRequest, AuthenticationException)
2024-07-09 13:59:15.293 ERROR 30028 --- [nio-8080-exec-1] exception.com.security.gateway.LogSupport : User account is locked File name: AbstractUserDetailsAuthenticationProvider.java line: 325
2024-07-09 13:59:15.301 DEBUG 30028 --- [nio-8080-exec-1] org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
2024-07-09 13:59:15.302 DEBUG 30028 --- [nio-8080-exec-1] org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor : Writing [exception.com.security.gateway.ApiError@b4c3fd5]
2024-07-09 13:59:15.313  WARN 30028 --- [nio-8080-exec-1] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authentication.LockedException: User account is locked]
2024-07-09 14:01:47.791 DEBUG 30028 --- [nio-8080-exec-4] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : Using @ExceptionHandler handler.exception.com.security.gateway.RestExceptionHandler#handleAuthenticationException(HttpServletRequest, AuthenticationException)
2024-07-09 14:01:47.792 ERROR 30028 --- [nio-8080-exec-4] exception.com.security.gateway.LogSupport : User account is locked File name: AbstractUserDetailsAuthenticationProvider.java line: 325
2024-07-09 14:01:47.793 DEBUG 30028 --- [nio-8080-exec-4] org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
2024-07-09 14:01:47.794 DEBUG 30028 --- [nio-8080-exec-4] org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor : Writing [exception.com.security.gateway.ApiError@42666248]
2024-07-09 14:01:47.795  WARN 30028 --- [nio-8080-exec-4] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authentication.LockedException: User account is locked]
2024-07-09 14:13:14.904 DEBUG 30028 --- [nio-8080-exec-8] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : Using @ExceptionHandler handler.exception.com.security.gateway.RestExceptionHandler#handleAuthenticationException(HttpServletRequest, AuthenticationException)
2024-07-09 14:13:14.906 ERROR 30028 --- [nio-8080-exec-8] exception.com.security.gateway.LogSupport : User account is locked File name: AbstractUserDetailsAuthenticationProvider.java line: 325
2024-07-09 14:13:14.908 DEBUG 30028 --- [nio-8080-exec-8] org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
2024-07-09 14:13:14.909 DEBUG 30028 --- [nio-8080-exec-8] org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor : Writing [exception.com.security.gateway.ApiError@7e1503d]
2024-07-09 14:13:14.911  WARN 30028 --- [nio-8080-exec-8] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.authentication.LockedException: User account is locked]
2024-07-09 14:13:15.213  INFO 30028 --- [extShutdownHook] org.springframework.cloud.netflix.zuul.ZuulFilterInitializer : Stopping filter initializer
2024-07-09 14:13:15.226  INFO 30028 --- [extShutdownHook] org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor : Shutting down ExecutorService 'applicationTaskExecutor'
2024-07-09 14:13:15.273  INFO 30028 --- [extShutdownHook] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-09 14:13:48.535  INFO 860 --- [  restartedMain] org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-07-09 14:13:49.123  INFO 860 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2024-07-09 14:13:49.139 DEBUG 860 --- [  restartedMain] org.springframework.web.client.RestTemplate : HTTP GET http://localhost:8888/security/default
2024-07-09 14:13:49.179 DEBUG 860 --- [  restartedMain] org.springframework.web.client.RestTemplate : Accept=[application/json, application/*+json]
2024-07-09 14:13:49.184  INFO 860 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2024-07-09 14:13:49.184  WARN 860 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/security/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2024-07-09 14:13:49.187  INFO 860 --- [  restartedMain] com.security.gateway.CentraGuardApplication : No active profile set, falling back to default profiles: default
2024-07-09 14:13:50.236  INFO 860 --- [  restartedMain] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-09 14:13:50.312  INFO 860 --- [  restartedMain] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 70 ms. Found 5 JPA repository interfaces.
2024-07-09 14:13:50.414  WARN 860 --- [  restartedMain] org.springframework.boot.actuate.endpoint.EndpointId : Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2024-07-09 14:13:50.549  INFO 860 --- [  restartedMain] org.springframework.cloud.context.scope.GenericScope : BeanFactory id=85a6a779-07b3-35af-b092-1e4bd37dad27
2024-07-09 14:13:50.735  INFO 860 --- [  restartedMain] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@20cb8bbf' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-07-09 14:13:50.741  INFO 860 --- [  restartedMain] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker : Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-07-09 14:13:51.098  INFO 860 --- [  restartedMain] org.springframework.boot.web.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 8080 (http)
2024-07-09 14:13:51.195  INFO 860 --- [  restartedMain] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1995 ms
2024-07-09 14:13:52.767  INFO 860 --- [  restartedMain] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-09 14:13:53.353 DEBUG 860 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-07-09 14:13:53.722 DEBUG 860 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2024-07-09 14:13:53.873  INFO 860 --- [  restartedMain] org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver : Exposing 3 endpoint(s) beneath base path '/actuator'
2024-07-09 14:13:54.019  INFO 860 --- [  restartedMain] org.springframework.security.web.DefaultSecurityFilterChain : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6b5af8c2, org.springframework.security.web.context.SecurityContextPersistenceFilter@23ec9ab, org.springframework.security.web.header.HeaderWriterFilter@68690a43, org.springframework.web.filter.CorsFilter@735ab7b8, org.springframework.security.web.authentication.logout.LogoutFilter@322755f1, jwt.com.security.gateway.JwtEmailAndPasswordAuthenticationFilter@1146bba9, jwt.com.security.gateway.JwtTokenVerifier@50bdfd6f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@455bf240, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6cea8b4b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4c41c01, org.springframework.security.web.session.SessionManagementFilter@33aa347, org.springframework.security.web.access.ExceptionTranslationFilter@5dde70ad, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@67db5fe4]
2024-07-09 14:13:54.082  INFO 860 --- [  restartedMain] org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor : Initializing ExecutorService 'applicationTaskExecutor'
2024-07-09 14:13:54.120  INFO 860 --- [  restartedMain] org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer : LiveReload server is running on port 35729
2024-07-09 14:13:54.136 DEBUG 860 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-07-09 14:13:54.165 DEBUG 860 --- [  restartedMain] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping : Patterns [/swagger-ui/] in 'viewControllerHandlerMapping'
2024-07-09 14:13:54.184 DEBUG 860 --- [  restartedMain] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping : Patterns [/swagger-ui/**, /webjars/**, /**] in 'resourceHandlerMapping'
2024-07-09 14:13:54.497  INFO 860 --- [  restartedMain] org.springframework.cloud.netflix.zuul.ZuulFilterInitializer : Starting filter initializer
2024-07-09 14:13:54.584  INFO 860 --- [  restartedMain] org.springframework.boot.web.embedded.tomcat.TomcatWebServer : Tomcat started on port(s): 8080 (http) with context path ''
2024-07-09 14:13:55.037  INFO 860 --- [  restartedMain] com.security.gateway.CentraGuardApplication : Started CentraGuardApplication in 7.252 seconds (JVM running for 8.46)
2024-07-09 14:13:55.295  INFO 860 --- [2)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Initializing Servlet 'dispatcherServlet'
2024-07-09 14:13:55.295 DEBUG 860 --- [2)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected StandardServletMultipartResolver
2024-07-09 14:13:55.295 DEBUG 860 --- [2)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected AcceptHeaderLocaleResolver
2024-07-09 14:13:55.296 DEBUG 860 --- [2)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected FixedThemeResolver
2024-07-09 14:13:55.298 DEBUG 860 --- [2)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@581563e
2024-07-09 14:13:55.299 DEBUG 860 --- [2)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected org.springframework.web.servlet.support.SessionFlashMapManager@44ebd2fd
2024-07-09 14:13:55.300 DEBUG 860 --- [2)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-07-09 14:13:55.300  INFO 860 --- [2)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Completed initialization in 5 ms
2024-07-09 14:15:40.754 DEBUG 860 --- [nio-8080-exec-8] org.springframework.web.servlet.DispatcherServlet : "ERROR" dispatch for POST "/error", parameters={}
2024-07-09 14:15:40.765 DEBUG 860 --- [nio-8080-exec-8] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping : Mapped to org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController#error(HttpServletRequest)
2024-07-09 14:15:40.781 DEBUG 860 --- [nio-8080-exec-8] org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor : Using 'application/json', given [*/*] and supported [application/json, application/*+json, application/json, application/*+json]
2024-07-09 14:15:40.782 DEBUG 860 --- [nio-8080-exec-8] org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor : Writing [{timestamp=Tue Jul 09 14:15:40 JST 2024, status=403, error=Forbidden, message=Access Denied, path=/r (truncated)...]
2024-07-09 14:15:40.792 DEBUG 860 --- [nio-8080-exec-8] org.springframework.web.servlet.DispatcherServlet : Exiting from "ERROR" dispatch, status 403
2024-07-09 14:16:01.372 DEBUG 860 --- [nio-8080-exec-6] org.springframework.web.servlet.DispatcherServlet : POST "/receipt_ocr_api/receipt", parameters={}
2024-07-09 14:16:01.447  INFO 860 --- [nio-8080-exec-6] zuul.com.security.gateway.SimpleFilter : POST request to http://localhost:8080/receipt_ocr_api/receipt
2024-07-09 14:16:01.687 DEBUG 860 --- [nio-8080-exec-6] org.springframework.web.servlet.DispatcherServlet : Completed 200 OK
2024-07-09 14:42:37.152  INFO 860 --- [       Thread-7] org.springframework.cloud.netflix.zuul.ZuulFilterInitializer : Stopping filter initializer
2024-07-09 14:42:37.160  INFO 860 --- [       Thread-7] org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor : Shutting down ExecutorService 'applicationTaskExecutor'
2024-07-09 14:42:37.177  INFO 860 --- [       Thread-7] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-09 14:42:38.815  INFO 860 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2024-07-09 14:42:38.816 DEBUG 860 --- [  restartedMain] org.springframework.web.client.RestTemplate : HTTP GET http://localhost:8888/security/default
2024-07-09 14:42:38.820 DEBUG 860 --- [  restartedMain] org.springframework.web.client.RestTemplate : Accept=[application/json, application/*+json]
2024-07-09 14:42:38.836  INFO 860 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2024-07-09 14:42:38.837  WARN 860 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/security/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2024-07-09 14:42:38.839  INFO 860 --- [  restartedMain] com.security.gateway.CentraGuardApplication : No active profile set, falling back to default profiles: default
2024-07-09 14:42:39.543  INFO 860 --- [  restartedMain] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-09 14:42:39.593  INFO 860 --- [  restartedMain] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 50 ms. Found 5 JPA repository interfaces.
2024-07-09 14:42:39.725  INFO 860 --- [  restartedMain] org.springframework.cloud.context.scope.GenericScope : BeanFactory id=85a6a779-07b3-35af-b092-1e4bd37dad27
2024-07-09 14:42:39.765  INFO 860 --- [  restartedMain] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@6dc3d878' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-07-09 14:42:39.770  INFO 860 --- [  restartedMain] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker : Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-07-09 14:42:39.877  INFO 860 --- [  restartedMain] org.springframework.boot.web.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 8080 (http)
2024-07-09 14:42:39.937  INFO 860 --- [  restartedMain] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1093 ms
2024-07-09 14:58:03.172  INFO ${sys:PID} --- [    Test worker] org.springframework.boot.test.context.SpringBootTestContextBootstrapper : Neither @ContextConfiguration nor @ContextHierarchy found for test class [com.security.gateway.controller.UserControllerSecurityTest], using SpringBootContextLoader
2024-07-09 14:58:03.185  INFO ${sys:PID} --- [    Test worker] org.springframework.test.context.support.AbstractContextLoader : Could not detect default resource locations for test class [com.security.gateway.controller.UserControllerSecurityTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2024-07-09 14:58:03.186  INFO ${sys:PID} --- [    Test worker] org.springframework.test.context.support.AnnotationConfigContextLoaderUtils : Could not detect default configuration classes for test class [com.security.gateway.controller.UserControllerSecurityTest]: UserControllerSecurityTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-07-09 14:58:03.334  INFO ${sys:PID} --- [    Test worker] org.springframework.boot.test.context.SpringBootTestContextBootstrapper : Found @SpringBootConfiguration com.security.gateway.CentraGuardApplication for test class com.security.gateway.controller.UserControllerSecurityTest
2024-07-09 14:58:03.424  INFO ${sys:PID} --- [    Test worker] org.springframework.boot.test.context.SpringBootTestContextBootstrapper : Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener]
2024-07-09 14:58:03.442  INFO ${sys:PID} --- [    Test worker] org.springframework.boot.test.context.SpringBootTestContextBootstrapper : Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@12ffd1de, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@3d278b4d, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@4096aa05, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@9d3c67, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6c806c8b, org.springframework.test.context.support.DirtiesContextTestExecutionListener@6dfcffb5, org.springframework.test.context.transaction.TransactionalTestExecutionListener@184fb68d, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@71d8cfe7, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@1e530163, org.springframework.test.context.event.EventPublishingTestExecutionListener@14d8444b, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@71466383, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@46d63dbb, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@4088741b, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@16a49a5d, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@54bca971, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@23706db8, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@205bed61]
2024-07-09 14:58:05.056  INFO 7972 --- [    Test worker] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2024-07-09 14:58:05.090 DEBUG 7972 --- [    Test worker] org.springframework.web.client.RestTemplate : HTTP GET http://localhost:8888/security/local
2024-07-09 14:58:05.166 DEBUG 7972 --- [    Test worker] org.springframework.web.client.RestTemplate : Accept=[application/json, application/*+json]
2024-07-09 14:58:05.176  INFO 7972 --- [    Test worker] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2024-07-09 14:58:05.177  WARN 7972 --- [    Test worker] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/security/local": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2024-07-09 14:58:05.188  INFO 7972 --- [    Test worker] com.security.gateway.controller.UserControllerSecurityTest : The following profiles are active: local
2024-07-09 14:58:05.194 DEBUG 7972 --- [    Test worker] org.springframework.web.context.support.GenericWebApplicationContext : Refreshing org.springframework.web.context.support.GenericWebApplicationContext@6cbbb9c4
2024-07-09 14:58:06.817  INFO 7972 --- [    Test worker] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-09 14:58:06.968  INFO 7972 --- [    Test worker] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 140 ms. Found 5 JPA repository interfaces.
2024-07-09 14:58:07.155  WARN 7972 --- [    Test worker] org.springframework.boot.actuate.endpoint.EndpointId : Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2024-07-09 14:58:07.449  INFO 7972 --- [    Test worker] org.springframework.cloud.context.scope.GenericScope : BeanFactory id=94ad61a8-cede-38c5-a478-d50f3e41c3e8
2024-07-09 14:58:08.569  INFO 7972 --- [    Test worker] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@5ead245' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-07-09 14:58:08.593  INFO 7972 --- [    Test worker] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker : Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-07-09 14:58:10.508  INFO 7972 --- [    Test worker] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-09 14:58:11.872 DEBUG 7972 --- [    Test worker] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-07-09 14:58:13.406 DEBUG 7972 --- [    Test worker] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2024-07-09 14:58:13.708  INFO 7972 --- [    Test worker] org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver : Exposing 3 endpoint(s) beneath base path '/actuator'
2024-07-09 14:58:14.235  INFO 7972 --- [    Test worker] org.springframework.security.web.DefaultSecurityFilterChain : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3681063, org.springframework.security.web.context.SecurityContextPersistenceFilter@1a5d0d94, org.springframework.security.web.header.HeaderWriterFilter@ed6d97f, org.springframework.web.filter.CorsFilter@74944d7f, org.springframework.security.web.authentication.logout.LogoutFilter@3593a38d, com.security.gateway.jwt.JwtEmailAndPasswordAuthenticationFilter@240e8240, com.security.gateway.jwt.JwtTokenVerifier@71ebc2e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@427937c1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@a23ecf4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5853431f, org.springframework.security.web.session.SessionManagementFilter@7682b160, org.springframework.security.web.access.ExceptionTranslationFilter@55a72c9e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@66a97b79]
2024-07-09 14:58:14.559  INFO 7972 --- [    Test worker] org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor : Initializing ExecutorService 'applicationTaskExecutor'
2024-07-09 14:58:14.654 DEBUG 7972 --- [    Test worker] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-07-09 14:58:14.731 DEBUG 7972 --- [    Test worker] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping : Patterns [/swagger-ui/] in 'viewControllerHandlerMapping'
2024-07-09 14:58:14.779 DEBUG 7972 --- [    Test worker] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping : Patterns [/swagger-ui/**, /webjars/**, /**] in 'resourceHandlerMapping'
2024-07-09 14:58:15.327  INFO 7972 --- [    Test worker] org.springframework.boot.test.mock.web.SpringBootMockServletContext : Initializing Spring TestDispatcherServlet ''
2024-07-09 14:58:15.327  INFO 7972 --- [    Test worker] org.springframework.test.web.servlet.TestDispatcherServlet : Initializing Servlet ''
2024-07-09 14:58:15.330  INFO 7972 --- [    Test worker] org.springframework.test.web.servlet.TestDispatcherServlet : Completed initialization in 2 ms
2024-07-09 14:58:15.852  INFO 7972 --- [    Test worker] org.springframework.cloud.netflix.zuul.ZuulFilterInitializer : Starting filter initializer
2024-07-09 14:58:16.315  INFO 7972 --- [    Test worker] com.security.gateway.controller.UserControllerSecurityTest : Started UserControllerSecurityTest in 12.813 seconds (JVM running for 15.1)
2024-07-09 14:58:16.751 DEBUG 7972 --- [    Test worker] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping : Mapped to com.security.gateway.controller.UserController#getUserWithId(String)
2024-07-09 14:58:16.786 DEBUG 7972 --- [    Test worker] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : Using @ExceptionHandler com.security.gateway.exception.handler.RestExceptionHandler#processRuntimeException(HttpServletRequest, RuntimeException)
2024-07-09 14:58:16.800 ERROR 7972 --- [    Test worker] com.security.gateway.exception.LogSupport : Access is denied File name: AffirmativeBased.java line: 73
2024-07-09 14:58:16.831 DEBUG 7972 --- [    Test worker] org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor : Using 'application/json', given [application/json] and supported [application/json, application/*+json, application/json, application/*+json]
2024-07-09 14:58:16.833 DEBUG 7972 --- [    Test worker] org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor : Writing [com.security.gateway.exception.ApiError@596707f5]
2024-07-09 14:58:16.873 DEBUG 7972 --- [    Test worker] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : Resolved [org.springframework.security.access.AccessDeniedException: Access is denied]
2024-07-09 14:58:16.946 DEBUG 7972 --- [extShutdownHook] org.springframework.web.context.support.GenericWebApplicationContext : Closing org.springframework.web.context.support.GenericWebApplicationContext@6cbbb9c4, started on Tue Jul 09 14:58:05 JST 2024, parent: org.springframework.context.annotation.AnnotationConfigApplicationContext@4437ac07
2024-07-09 14:58:16.949  INFO 7972 --- [extShutdownHook] org.springframework.cloud.netflix.zuul.ZuulFilterInitializer : Stopping filter initializer
2024-07-09 14:58:16.955  INFO 7972 --- [extShutdownHook] org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor : Shutting down ExecutorService 'applicationTaskExecutor'
2024-07-09 14:58:17.000  INFO 7972 --- [extShutdownHook] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-09 14:58:40.505  INFO 8260 --- [  restartedMain] org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-07-09 14:58:41.124  INFO 8260 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2024-07-09 14:58:41.139 DEBUG 8260 --- [  restartedMain] org.springframework.web.client.RestTemplate : HTTP GET http://localhost:8888/security/default
2024-07-09 14:58:41.181 DEBUG 8260 --- [  restartedMain] org.springframework.web.client.RestTemplate : Accept=[application/json, application/*+json]
2024-07-09 14:58:41.187  INFO 8260 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2024-07-09 14:58:41.188  WARN 8260 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/security/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2024-07-09 14:58:41.191  INFO 8260 --- [  restartedMain] com.security.gateway.CentraGuardApplication : No active profile set, falling back to default profiles: default
2024-07-09 14:58:42.301  INFO 8260 --- [  restartedMain] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-09 14:58:42.383  INFO 8260 --- [  restartedMain] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 76 ms. Found 5 JPA repository interfaces.
2024-07-09 14:58:42.490  WARN 8260 --- [  restartedMain] org.springframework.boot.actuate.endpoint.EndpointId : Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2024-07-09 14:58:42.641  INFO 8260 --- [  restartedMain] org.springframework.cloud.context.scope.GenericScope : BeanFactory id=44456cf6-5875-360a-82b9-281ad6e5a0cc
2024-07-09 14:58:42.856  INFO 8260 --- [  restartedMain] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@6d8ba540' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-07-09 14:58:42.863  INFO 8260 --- [  restartedMain] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker : Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-07-09 14:58:43.272  INFO 8260 --- [  restartedMain] org.springframework.boot.web.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 8080 (http)
2024-07-09 14:58:43.372  INFO 8260 --- [  restartedMain] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2164 ms
2024-07-09 14:58:45.153  INFO 8260 --- [  restartedMain] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-09 14:58:45.697 DEBUG 8260 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-07-09 14:58:51.064 DEBUG 8260 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2024-07-09 14:58:51.274  INFO 8260 --- [  restartedMain] org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver : Exposing 3 endpoint(s) beneath base path '/actuator'
2024-07-09 14:58:51.456  INFO 8260 --- [  restartedMain] org.springframework.security.web.DefaultSecurityFilterChain : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@73262003, org.springframework.security.web.context.SecurityContextPersistenceFilter@7a59d677, org.springframework.security.web.header.HeaderWriterFilter@4477abe0, org.springframework.web.filter.CorsFilter@ade3bce, org.springframework.security.web.authentication.logout.LogoutFilter@5eb7c4f4, com.security.gateway.jwt.JwtEmailAndPasswordAuthenticationFilter@a16d83e, com.security.gateway.jwt.JwtTokenVerifier@4d49c3a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5c10b7e9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3b8f1018, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7a856788, org.springframework.security.web.session.SessionManagementFilter@7005a931, org.springframework.security.web.access.ExceptionTranslationFilter@4a76dd8a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@580978db]
2024-07-09 14:58:51.548  INFO 8260 --- [  restartedMain] org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor : Initializing ExecutorService 'applicationTaskExecutor'
2024-07-09 14:58:51.597  INFO 8260 --- [  restartedMain] org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer : LiveReload server is running on port 35729
2024-07-09 14:58:51.619 DEBUG 8260 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-07-09 14:58:51.655 DEBUG 8260 --- [  restartedMain] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping : Patterns [/swagger-ui/] in 'viewControllerHandlerMapping'
2024-07-09 14:58:51.678 DEBUG 8260 --- [  restartedMain] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping : Patterns [/swagger-ui/**, /webjars/**, /**] in 'resourceHandlerMapping'
2024-07-09 14:58:52.059  INFO 8260 --- [  restartedMain] org.springframework.cloud.netflix.zuul.ZuulFilterInitializer : Starting filter initializer
2024-07-09 14:58:52.183  INFO 8260 --- [  restartedMain] org.springframework.boot.web.embedded.tomcat.TomcatWebServer : Tomcat started on port(s): 8080 (http) with context path ''
2024-07-09 14:58:52.688  INFO 8260 --- [  restartedMain] com.security.gateway.CentraGuardApplication : Started CentraGuardApplication in 12.844 seconds (JVM running for 14.273)
2024-07-09 14:58:52.798 ERROR 8260 --- [  restartedMain] org.hibernate.engine.jdbc.spi.SqlExceptionHelper : ERROR: duplicate key value violates unique constraint "granted_authority_pkey"
  Detail: Key (granted_authority_id)=(1) already exists.
2024-07-09 14:58:52.806  INFO 8260 --- [  restartedMain] org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener : 

Error starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.
2024-07-09 14:58:53.035  INFO 8260 --- [  restartedMain] org.springframework.cloud.netflix.zuul.ZuulFilterInitializer : Stopping filter initializer
2024-07-09 14:58:53.039  INFO 8260 --- [  restartedMain] org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor : Shutting down ExecutorService 'applicationTaskExecutor'
2024-07-09 14:58:53.055  INFO 8260 --- [  restartedMain] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2024-07-09 14:58:53.093 ERROR 8260 --- [  restartedMain] org.springframework.boot.SpringApplication : Application run failed

java.lang.IllegalStateException: Failed to execute CommandLineRunner
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:822) [spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:803) [spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:346) [spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1340) [spring-boot-2.4.5.jar:2.4.5]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1329) [spring-boot-2.4.5.jar:2.4.5]
	at com.security.gateway.CentraGuardApplication.main(CentraGuardApplication.java:19) [main/:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:566) ~[?:?]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) [spring-boot-devtools-2.4.5.jar:2.4.5]
Caused by: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:154) ~[hibernate-core-5.4.30.Final.jar:5.4.30.Final]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:181) ~[hibernate-core-5.4.30.Final.jar:5.4.30.Final]
	at org.hibernate.query.internal.AbstractProducedQuery.executeUpdate(AbstractProducedQuery.java:1681) ~[hibernate-core-5.4.30.Final.jar:5.4.30.Final]
	at com.security.gateway.bootstrap.SecurityBootstrap.lambda$insertSecurity$2(SecurityBootstrap.java:80) ~[main/:?]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-5.3.6.jar:5.3.6]
	at com.security.gateway.bootstrap.SecurityBootstrap.insertSecurity(SecurityBootstrap.java:79) ~[main/:?]
	at com.security.gateway.bootstrap.SecurityBootstrap.run(SecurityBootstrap.java:57) ~[main/:?]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:819) ~[spring-boot-2.4.5.jar:2.4.5]
	... 10 more
Caused by: org.hibernate.exception.ConstraintViolationException: could not execute statement
	at org.hibernate.exception.internal.SQLStateConversionDelegate.convert(SQLStateConversionDelegate.java:109) ~[hibernate-core-5.4.30.Final.jar:5.4.30.Final]
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:42) ~[hibernate-core-5.4.30.Final.jar:5.4.30.Final]
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113) ~[hibernate-core-5.4.30.Final.jar:5.4.30.Final]
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:99) ~[hibernate-core-5.4.30.Final.jar:5.4.30.Final]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:200) ~[hibernate-core-5.4.30.Final.jar:5.4.30.Final]
	at org.hibernate.engine.query.spi.NativeSQLQueryPlan.performExecuteUpdate(NativeSQLQueryPlan.java:107) ~[hibernate-core-5.4.30.Final.jar:5.4.30.Final]
	at org.hibernate.internal.SessionImpl.executeNativeUpdate(SessionImpl.java:1509) ~[hibernate-core-5.4.30.Final.jar:5.4.30.Final]
	at org.hibernate.query.internal.NativeQueryImpl.doExecuteUpdate(NativeQueryImpl.java:298) ~[hibernate-core-5.4.30.Final.jar:5.4.30.Final]
	at org.hibernate.query.internal.AbstractProducedQuery.executeUpdate(AbstractProducedQuery.java:1672) ~[hibernate-core-5.4.30.Final.jar:5.4.30.Final]
	at com.security.gateway.bootstrap.SecurityBootstrap.lambda$insertSecurity$2(SecurityBootstrap.java:80) ~[main/:?]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-5.3.6.jar:5.3.6]
	at com.security.gateway.bootstrap.SecurityBootstrap.insertSecurity(SecurityBootstrap.java:79) ~[main/:?]
	at com.security.gateway.bootstrap.SecurityBootstrap.run(SecurityBootstrap.java:57) ~[main/:?]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:819) ~[spring-boot-2.4.5.jar:2.4.5]
	... 10 more
Caused by: org.postgresql.util.PSQLException: ERROR: duplicate key value violates unique constraint "granted_authority_pkey"
  Detail: Key (granted_authority_id)=(1) already exists.
	at org.postgresql.core.v3.QueryExecutorImpl.receiveErrorResponse(QueryExecutorImpl.java:2725) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.v3.QueryExecutorImpl.processResults(QueryExecutorImpl.java:2412) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.v3.QueryExecutorImpl.execute(QueryExecutorImpl.java:371) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeInternal(PgStatement.java:502) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:419) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgPreparedStatement.executeWithFlags(PgPreparedStatement.java:194) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgPreparedStatement.executeUpdate(PgPreparedStatement.java:155) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.executeUpdate(ProxyPreparedStatement.java:61) ~[HikariCP-3.4.5.jar:?]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeUpdate(HikariProxyPreparedStatement.java) ~[HikariCP-3.4.5.jar:?]
	at org.hibernate.engine.jdbc.internal.ResultSetReturnImpl.executeUpdate(ResultSetReturnImpl.java:197) ~[hibernate-core-5.4.30.Final.jar:5.4.30.Final]
	at org.hibernate.engine.query.spi.NativeSQLQueryPlan.performExecuteUpdate(NativeSQLQueryPlan.java:107) ~[hibernate-core-5.4.30.Final.jar:5.4.30.Final]
	at org.hibernate.internal.SessionImpl.executeNativeUpdate(SessionImpl.java:1509) ~[hibernate-core-5.4.30.Final.jar:5.4.30.Final]
	at org.hibernate.query.internal.NativeQueryImpl.doExecuteUpdate(NativeQueryImpl.java:298) ~[hibernate-core-5.4.30.Final.jar:5.4.30.Final]
	at org.hibernate.query.internal.AbstractProducedQuery.executeUpdate(AbstractProducedQuery.java:1672) ~[hibernate-core-5.4.30.Final.jar:5.4.30.Final]
	at com.security.gateway.bootstrap.SecurityBootstrap.lambda$insertSecurity$2(SecurityBootstrap.java:80) ~[main/:?]
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140) ~[spring-tx-5.3.6.jar:5.3.6]
	at com.security.gateway.bootstrap.SecurityBootstrap.insertSecurity(SecurityBootstrap.java:79) ~[main/:?]
	at com.security.gateway.bootstrap.SecurityBootstrap.run(SecurityBootstrap.java:57) ~[main/:?]
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:819) ~[spring-boot-2.4.5.jar:2.4.5]
	... 10 more

2024-07-09 15:01:01.444  INFO 17244 --- [  restartedMain] org.springframework.boot.devtools.env.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2024-07-09 15:01:02.211  INFO 17244 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Fetching config from server at : http://localhost:8888
2024-07-09 15:01:02.225 DEBUG 17244 --- [  restartedMain] org.springframework.web.client.RestTemplate : HTTP GET http://localhost:8888/security/default
2024-07-09 15:01:02.266 DEBUG 17244 --- [  restartedMain] org.springframework.web.client.RestTemplate : Accept=[application/json, application/*+json]
2024-07-09 15:01:02.270  INFO 17244 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Connect Timeout Exception on Url - http://localhost:8888. Will be trying the next url if available
2024-07-09 15:01:02.271  WARN 17244 --- [  restartedMain] org.springframework.cloud.config.client.ConfigServicePropertySourceLocator : Could not locate PropertySource: I/O error on GET request for "http://localhost:8888/security/default": Connection refused: connect; nested exception is java.net.ConnectException: Connection refused: connect
2024-07-09 15:01:02.274  INFO 17244 --- [  restartedMain] com.security.gateway.CentraGuardApplication : No active profile set, falling back to default profiles: default
2024-07-09 15:01:03.316  INFO 17244 --- [  restartedMain] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-07-09 15:01:03.391  INFO 17244 --- [  restartedMain] org.springframework.data.repository.config.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 69 ms. Found 5 JPA repository interfaces.
2024-07-09 15:01:03.511  WARN 17244 --- [  restartedMain] org.springframework.boot.actuate.endpoint.EndpointId : Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2024-07-09 15:01:03.666  INFO 17244 --- [  restartedMain] org.springframework.cloud.context.scope.GenericScope : BeanFactory id=85a6a779-07b3-35af-b092-1e4bd37dad27
2024-07-09 15:01:03.853  INFO 17244 --- [  restartedMain] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3cf94050' of type [org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-07-09 15:01:03.860  INFO 17244 --- [  restartedMain] org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker : Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2024-07-09 15:01:04.259  INFO 17244 --- [  restartedMain] org.springframework.boot.web.embedded.tomcat.TomcatWebServer : Tomcat initialized with port(s): 8080 (http)
2024-07-09 15:01:04.442  INFO 17244 --- [  restartedMain] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2156 ms
2024-07-09 15:01:06.330  INFO 17244 --- [  restartedMain] org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-07-09 15:01:06.922 DEBUG 17244 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver : ControllerAdvice beans: 1 @ExceptionHandler, 1 ResponseBodyAdvice
2024-07-09 15:01:07.359 DEBUG 17244 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping : 11 mappings in 'requestMappingHandlerMapping'
2024-07-09 15:01:07.589  INFO 17244 --- [  restartedMain] org.springframework.boot.actuate.endpoint.web.EndpointLinksResolver : Exposing 3 endpoint(s) beneath base path '/actuator'
2024-07-09 15:01:07.791  INFO 17244 --- [  restartedMain] org.springframework.security.web.DefaultSecurityFilterChain : Will secure any request with [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5dda7f9b, org.springframework.security.web.context.SecurityContextPersistenceFilter@26034058, org.springframework.security.web.header.HeaderWriterFilter@515a984, org.springframework.web.filter.CorsFilter@30bba303, org.springframework.security.web.authentication.logout.LogoutFilter@450a5c7e, com.security.gateway.jwt.JwtEmailAndPasswordAuthenticationFilter@28ad81a4, com.security.gateway.jwt.JwtTokenVerifier@2422c6c0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@67c01ca6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3e19639e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@43572ae2, org.springframework.security.web.session.SessionManagementFilter@7ccd4164, org.springframework.security.web.access.ExceptionTranslationFilter@11c9fda9, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7ce95cfd]
2024-07-09 15:01:07.866  INFO 17244 --- [  restartedMain] org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor : Initializing ExecutorService 'applicationTaskExecutor'
2024-07-09 15:01:07.914  INFO 17244 --- [  restartedMain] org.springframework.boot.devtools.autoconfigure.OptionalLiveReloadServer : LiveReload server is running on port 35729
2024-07-09 15:01:07.933 DEBUG 17244 --- [  restartedMain] org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter : ControllerAdvice beans: 0 @ModelAttribute, 0 @InitBinder, 1 RequestBodyAdvice, 1 ResponseBodyAdvice
2024-07-09 15:01:07.966 DEBUG 17244 --- [  restartedMain] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping : Patterns [/swagger-ui/] in 'viewControllerHandlerMapping'
2024-07-09 15:01:07.991 DEBUG 17244 --- [  restartedMain] org.springframework.web.servlet.handler.SimpleUrlHandlerMapping : Patterns [/swagger-ui/**, /webjars/**, /**] in 'resourceHandlerMapping'
2024-07-09 15:01:08.409  INFO 17244 --- [  restartedMain] org.springframework.cloud.netflix.zuul.ZuulFilterInitializer : Starting filter initializer
2024-07-09 15:01:08.514  INFO 17244 --- [  restartedMain] org.springframework.boot.web.embedded.tomcat.TomcatWebServer : Tomcat started on port(s): 8080 (http) with context path ''
2024-07-09 15:01:09.092  INFO 17244 --- [  restartedMain] com.security.gateway.CentraGuardApplication : Started CentraGuardApplication in 8.277 seconds (JVM running for 11.182)
2024-07-09 15:01:09.643  INFO 17244 --- [3)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Initializing Servlet 'dispatcherServlet'
2024-07-09 15:01:09.644 DEBUG 17244 --- [3)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected StandardServletMultipartResolver
2024-07-09 15:01:09.644 DEBUG 17244 --- [3)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected AcceptHeaderLocaleResolver
2024-07-09 15:01:09.644 DEBUG 17244 --- [3)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected FixedThemeResolver
2024-07-09 15:01:09.646 DEBUG 17244 --- [3)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator@1ca37968
2024-07-09 15:01:09.646 DEBUG 17244 --- [3)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Detected org.springframework.web.servlet.support.SessionFlashMapManager@1dac088e
2024-07-09 15:01:09.647 DEBUG 17244 --- [3)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : enableLoggingRequestDetails='false': request parameters and headers will be masked to prevent unsafe logging of potentially sensitive data
2024-07-09 15:01:09.647  INFO 17244 --- [3)-172.24.3.114] org.springframework.web.servlet.DispatcherServlet : Completed initialization in 3 ms
